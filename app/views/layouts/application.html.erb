<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width" />
    
	<title>Food Cart Finder!!!</title>
    
    <%= stylesheet_link_tag 'screen', 'formtastic', 'formtastic_changes' %>

    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript"> google.load("jquery", "1.3.2"); </script>
        
    <%= Mapstraction.header(:yahoo) %>	
    <%= @map.to_html if @map %>
    
    <script>
    function findme() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function(pos) {
                    // alert(pos.coords.latitude + ", " + pos.coords.longitude);
                    var pt = new LatLonPoint(pos.coords.latitude, pos.coords.longitude);
                    map.setCenterAndZoom(pt, 17);
                    var mk = new Marker(pt);
                    map.addMarker(mk);
                    jQuery("#report_latitude").val(pos.coords.latitude);
                    jQuery("#report_longitude").val(pos.coords.longitude);
                },
                function() {
                    // NOT FOUND
                    // alert('Could not find location');
                    // Returning Portland city center
                    var pt = new LatLonPoint(45.521094,-122.676274);
                    map.setCenterAndZoom(pt, 14);
                    var mk = new Marker(pt);
                    map.addMarker(mk);
                });
        } else {
            alert('Could not find location');
        }
  	}
    </script>
</head>

<body>
    <%= flash[:notice] %>
    <%= flash[:error] %>
    <%= flash[:success] %>
    <%= yield %>
</body>
</html>
